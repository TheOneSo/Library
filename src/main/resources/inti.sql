drop table if exists books;
drop table if exists autors;
drop table if exists genres;

create table autors (
  id int generated by default as identity primary key,
  autor varchar(255) not null
);

create table genres (
  id int generated by default as identity primary key,
  genre varchar(255) not null
);

create table books (
  id int generated by default as identity primary key,
  book varchar(255) not null,
  id_autor integer,
  id_genre integer,
  foreign key (id_autor) references autors (id),
  foreign key (id_genre) references genres (id)
);

insert into autors (id, autor) VALUES (1, 'Stephen Edwin King');
insert into autors (id, autor) values (2, 'Joanne Rowling');
insert into autors (id, autor) values (3, 'Dmitry Alexeevich Glukhovsky');

insert into genres (id, genre) values (1, 'Fantasy');
insert into genres (id, genre) VALUES (2, 'Horrors');
insert into genres (id, genre) values (3, 'Romance');

insert into books (id, book, id_autor, id_genre) values (1, 'Harry Potter and the Philosopher''s Stone', 2, 1);
insert into books (id, book, id_autor, id_genre) values (2, 'Harry Potter and the Chamber of Secrets', 2, 1);
insert into books (id, book, id_autor, id_genre) values (3, 'Metro 2035', 3, 1);
insert into books (id, book, id_autor, id_genre) values (4, 'Metro 2034', 3, 3);
insert into books (id, book, id_autor, id_genre) values (5, 'Under the Dome', 1, 3);
insert into books (id, book, id_autor, id_genre) values (6, 'It', 1, 2);


insert into autors (id, autor) values (4, 'Jhon');

insert into books (id, book, id_autor, id_genre) values (16, 'Java', 7, 1);

delete from autors where id = 4;

delete from books where id_autor = 4;

select
  a.autor, b.book, g.genre
from books b
       join autors a on b.id_autor = a.id
       join genres g on b.id_genre = g.id;